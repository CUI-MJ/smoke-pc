webpackJsonp([5],{C7UM:function(e,t){},ln48:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),o=a.n(s),n=a("2VaB"),r=a("/bkh"),i=a("H8JJ"),l=a("dmtY"),c=(a("R4Sj"),a("P9l9")),d={name:"Config",mixins:[n.a,i.a],components:{page:r.a},data:function(){return{activationVisible:!1,activationFrom:{userName:"",password:"",passwordChecked:!1},modelTitle:"新增用户",addVisible:!1,options:[],addFrom:{address:"",company:"",name:"",phone:"",grade:"",type:"",userId:"",unit:"",managerId:"",managerPhone:""},pageNum:1,pageSize:10,tableheight:500,entity:[],total:0,isLoading:!1,searchBar:{address:"",company:"",name:""},multipleSelection:[],isedit:!1,ischeckUser:!0,ischeckManager:!0}},mounted:function(){this.init()},computed:{},methods:{init:function(){var e=this.getseachobj();this.getShopsList(e)},handleSelectionChange:function(e){this.multipleSelection=e},handleInput:function(){this.searchBar.num=this.searchBar.num.replace(/[^\.\d]/g,"")},getseachobj:function(){var e=o()({},this.searchBar);return""==e.name&&delete e.name,""==e.company&&delete e.company,""==e.address&&delete e.address,e},reset:function(){this.searchBar={name:"",address:"",company:""},this.getShopsList()},search:function(){var e=this.getseachobj();this.getShopsList(e,!0)},getShopsList:function(e,t){var a=this,s=this,n={pageNum:s.pageNum?s.pageNum:"",pageSize:s.pageSize?s.pageSize:""};!0===t&&(n.pageNum=1);var r=o()(n,e);Object(c.i)(r).then(function(e){if("0000"===e.code){var t=e.data.list;s.entity=t,s.total=e.data.total}else a.$message({message:e.msg,type:"error"})}).catch(function(e){})},getblur:function(e){},handleClose:function(){},showMsgFromChild:function(e,t,a){if(this.pageNum==e&&this.pageSize==t)return!1;this.pageNum=e,this.pageSize=t;var s=this.getseachobj();this.getShopsList(s)},addCancle:function(){this.addFrom={address:"",company:"",name:"",phone:"",grade:"",type:"",userId:"",unit:"",managerId:"",managerPhone:""},this.addVisible=!1},addclick:function(){this.modelTitle="新增商铺",this.isedit=!1,this.addVisible=!0,this.addFrom={address:"",company:"",name:"",phone:"",grade:"",type:"",userId:"",unit:"",managerId:"",managerPhone:""}},addsubmit:function(e){var t=this,a=this,s=a.addFrom;return""==s.name?(this.messageShow("请输入商铺名称","error",!1),!1):""==s.address?(this.messageShow("请输入商铺地址","error",!1),!1):""==s.type?(this.messageShow("请输入商铺类型","error",!1),!1):""==s.phone?(this.messageShow("请输入商铺联系电话","error",!1),!1):Object(l.e)(s.phone)||Object(l.f)(s.phone)?""==s.grade?(this.messageShow("请输入客户档位","error",!1),!1):(a.isLoading=!0,s.grade=Number(s.grade),delete s.unit,void(!0===a.isedit?Object(c.n)(s).then(function(e){"0000"===e.code?(t.$message({message:e.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):t.$message({message:e.msg,type:"error"})}).catch(function(e){}):Object(c.j)(s).then(function(e){"0000"===e.code?(t.$message({message:e.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):t.$message({message:e.msg,type:"error"})}).catch(function(e){}))):(this.messageShow("请输入正确的电话格式","error",!1),!1)},edit:function(e){this.isedit=!0,this.modelTitle="编辑信息",this.addVisible=!0,this.addFrom={address:e.address,company:e.company,name:e.name,phone:e.phone,grade:e.grade,type:e.type,userId:e.userId,id:e.id,managerId:e.managerId,managerPhone:e.managerPhone}},userCheck:function(e,t){var a=this,s="";if("ischeckUser"==t){if(s=a.addFrom.unit,a.ischeckUser=!1,""==a.addFrom.unit)return a.messageShow("请输入检测用户的手机号","error",!1),a.ischeckUser=!0,!1;if(!Object(l.e)(a.addFrom.unit))return a.messageShow("请输入正确格式的手机号","error",!1),a.ischeckUser=!0,!1}else{if(a.ischeckManager=!1,s=a.addFrom.managerPhone,""==a.addFrom.managerPhone)return a.messageShow("请输入检测用户的手机号","error",!1),a.ischeckManager=!0,!1;if(!Object(l.e)(a.addFrom.managerPhone))return a.messageShow("请输入正确格式的手机号","error",!1),a.ischeckManager=!0,!1}Object(c.c)(s+"/"+e).then(function(e){"ischeckUser"==t&&(a.ischeckUser=!0),"ischeckManager"==t&&(a.ischeckManager=!0),"0000"===e.code?(a.$message({message:"检索成功",type:"success"}),"ischeckUser"==t&&(a.addFrom.userId=e.data.id),"ischeckManager"==t&&(a.addFrom.managerId=e.data.id)):a.$message({message:e.msg,type:"error"})}).catch(function(e){"ischeckUser"==t&&(a.ischeckUser=!0),"ischeckManager"==t&&(a.ischeckManager=!0)})},messageShow:function(e,t,a){var s=this;s.$message({message:e,type:t,onClose:function(){a&&s.init()}})},batchImport:function(){this.$router.push({path:"/permanentImport"})},batchUpload:function(){window.open("https://membert.chinajinmao.cn/cig/shops/export-all-statistics/"+Object(l.c)("token"),"_blank")},shopExport:function(e){window.open("https://membert.chinajinmao.cn/cig/shops/export-statistics/"+e.id+"/"+Object(l.c)("token"),"_blank")},informationExport:function(e){window.open("https://membert.chinajinmao.cn/cig/shops/export-info-acq/"+e.id+"/"+Object(l.c)("token"),"_blank")},CigaretteData:function(e){window.open("https://membert.chinajinmao.cn/cig/shops/export-cigarette-sale/"+e.id+"/"+Object(l.c)("token"),"_blank")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container parkList"},[a("div",{staticClass:"title"},[e._v("商铺管理")]),e._v(" "),a("div",{ref:"searchBar",staticClass:"operations-bar"},[a("div",{staticClass:"right"},[a("el-form",{attrs:{inline:!0,model:e.searchBar}},[a("el-form-item",{attrs:{label:"商铺地址:"}},[a("el-input",{attrs:{autocomplete:"",placeholder:"输入商铺地址进行搜索"},model:{value:e.searchBar.address,callback:function(t){e.$set(e.searchBar,"address",t)},expression:"searchBar.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商铺名称:"}},[a("el-input",{attrs:{autocomplete:"",placeholder:"输入商铺名称进行搜索"},model:{value:e.searchBar.name,callback:function(t){e.$set(e.searchBar,"name",t)},expression:"searchBar.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属公司:"}},[a("el-input",{attrs:{placeholder:" 请输入所属公司进行搜索"},model:{value:e.searchBar.company,callback:function(t){e.$set(e.searchBar,"company",t)},expression:"searchBar.company"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button-sel",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"button-rs",on:{click:e.reset}},[e._v("清空")])],1)],1)],1),e._v(" "),a("div",{staticClass:"left"},[a("el-button",{staticClass:"button-add",on:{click:e.addclick}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","plus-circle"],rotate:"90"}}),e._v("新增\n      ")],1),e._v(" "),a("el-button",{staticClass:"button-sel",on:{click:e.batchImport}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","download"],rotate:"90"}}),e._v("批量导入\n      ")],1),e._v(" "),a("el-button",{staticClass:"button-sel",on:{click:e.batchUpload}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","download"],rotate:"90"}}),e._v("批量导出商铺统计\n      ")],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"pages-table",attrs:{"max-height":e.tableheight,"header-row-style":{height:0},"header-cell-style":{padding:0},"row-style":{height:0},"cell-style":{padding:0},data:e.entity,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商铺名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"商铺地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"所属公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"客户档位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grade))]),e._v(" "),t.row.grade?a("span",[e._v("档")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"绑定用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"managerId",label:"客户经理"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return e.shopExport(t.row)}}},[e._v("商铺统计导出")]),e._v(" "),a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return e.informationExport(t.row)}}},[e._v("信息采集导出")]),e._v(" "),a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return e.CigaretteData(t.row)}}},[e._v("卷烟销量导出")])]}}])})],1),e._v(" "),a("page",{attrs:{totalLength:e.total,number:e.pageSize},on:{listenToChildEvent:e.showMsgFromChild}}),e._v(" "),a("el-dialog",{staticClass:"addfrom",attrs:{title:e.modelTitle,visible:e.addVisible,width:"26%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{model:e.addFrom}},[a("div",{staticClass:"Formtitle"},[e._v("商铺管理")]),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("商铺名称")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商铺名称"},model:{value:e.addFrom.name,callback:function(t){e.$set(e.addFrom,"name",t)},expression:"addFrom.name"}})],1),e._v(" "),e.isedit?e._e():a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("商铺地址")])]),e._v(" "),a("el-input",{attrs:{type:"tel",autocomplete:"off",placeholder:"请输入商铺地址"},model:{value:e.addFrom.address,callback:function(t){e.$set(e.addFrom,"address",t)},expression:"addFrom.address"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("商铺类型")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商铺类型"},model:{value:e.addFrom.type,callback:function(t){e.$set(e.addFrom,"type",t)},expression:"addFrom.type"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("联系电话")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入联系电话"},model:{value:e.addFrom.phone,callback:function(t){e.$set(e.addFrom,"phone",t)},expression:"addFrom.phone"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("客户档位")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",type:"number",placeholder:"请输入商铺档位"},model:{value:e.addFrom.grade,callback:function(t){e.$set(e.addFrom,"grade",t)},expression:"addFrom.grade"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",[e._v("所属公司")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入所属公司"},model:{value:e.addFrom.company,callback:function(t){e.$set(e.addFrom,"company",t)},expression:"addFrom.company"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",[e._v("检索商铺用户")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入检索用户手机号"},model:{value:e.addFrom.unit,callback:function(t){e.$set(e.addFrom,"unit",t)},expression:"addFrom.unit"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",disabled:!e.ischeckUser},on:{click:function(t){return e.userCheck(3,"ischeckUser")}}},[e._v("点击进行用户检测")])],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",[e._v("绑定商铺用户")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.addFrom.userId,callback:function(t){e.$set(e.addFrom,"userId",t)},expression:"addFrom.userId"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",[e._v("检索客户经理")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入检索客户经理手机号"},model:{value:e.addFrom.managerPhone,callback:function(t){e.$set(e.addFrom,"managerPhone",t)},expression:"addFrom.managerPhone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",disabled:!e.ischeckManager},on:{click:function(t){return e.userCheck(2,"ischeckManager")}}},[e._v("点击进行客户经理检测")])],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",[e._v("绑定客户经理")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.addFrom.managerId,callback:function(t){e.$set(e.addFrom,"managerId",t)},expression:"addFrom.managerId"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addCancle}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addsubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(d,m,!1,function(e){a("C7UM")},"data-v-4ed18b96",null);t.default=p.exports}});