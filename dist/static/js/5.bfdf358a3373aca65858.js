webpackJsonp([5],{"793i":function(e,t){},qyvJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),s=a.n(i),l=a("2VaB"),r=a("/bkh"),n=a("H8JJ"),o=(a("R4Sj"),a("P9l9")),c=a("dmtY"),d={name:"Config",mixins:[l.a,n.a],components:{page:r.a},data:function(){return{activationVisible:!1,activationFrom:{userName:"",password:"",passwordChecked:!1},fileList:[],modelTitle:"新增用户",addVisible:!1,options:[],addFrom:{firmId:"",name:"",num:"",retailPrice:"",signPic:"",tradePrice:"",type:"",unit:"条"},pageNum:1,pageSize:10,tableheight:500,entity:[],total:0,isLoading:!1,searchBar:{name:"",num:"",firmId:""},multipleSelection:[],isedit:!1}},mounted:function(){this.init()},computed:{},methods:{init:function(){var e=this.getseachobj();this.getCigaretteList(e),this.getFirmList()},handleSelectionChange:function(e){this.multipleSelection=e},handleInput:function(){this.searchBar.num=this.searchBar.num.replace(/[^\.\d]/g,"")},getseachobj:function(){var e=s()({},this.searchBar);return""==e.name&&delete e.name,""==e.num&&delete e.num,""==e.firmId?delete e.firmId:e.firmId=Number(e.firmId),e},reset:function(){this.searchBar={name:"",num:"",firmId:""},this.getCigaretteList()},search:function(){var e=this.getseachobj();this.getCigaretteList(e,!0)},getCigaretteList:function(e,t){var a=this,i=this,l={pageNum:i.pageNum?i.pageNum:"",pageSize:i.pageSize?i.pageSize:""};!0===t&&(l.pageNum=1);var r=s()(l,e);Object(o.a)(r).then(function(e){if(console.log(e),"0000"===e.code){var t=e.data.list;i.entity=t,i.total=e.data.total}else a.$message({message:e.msg,type:"error"})}).catch(function(e){a.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})},getFirmList:function(){var e=this,t=this;Object(o.b)().then(function(a){"0000"===a.code?t.options=a.data:e.$message({message:a.msg,type:"error"})}).catch(function(t){e.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})},getblur:function(e){console.log(e,2222)},handleClose:function(){},showMsgFromChild:function(e,t,a){if(this.pageNum==e&&this.pageSize==t)return!1;this.pageNum=e,this.pageSize=t;var i=this.getseachobj();this.getCigaretteList(i)},addCancle:function(){this.addFrom={username:"",isShops:!1,isAdmin:!1,phoneNumber:"",password:"",signPic:""},this.addVisible=!1},addclick:function(){this.fileList=[],this.modelTitle="新增信息",this.isedit=!1,this.addVisible=!0,this.addFrom={firmId:"",name:"",num:"",retailPrice:"",tradePrice:"",type:"",unit:"条",signPic:""}},addsubmit:function(e){var t=this,a=this,i=a.addFrom;return""==i.firmId?(this.messageShow("请选择厂商","error",!1),!1):""==i.name?(this.messageShow("请输入商品名称","error",!1),!1):""==i.num?(this.messageShow("请输入商品编码","error",!1),!1):""==i.retailPrice?(this.messageShow("请输入零售价","error",!1),!1):""==i.tradePrice?(this.messageShow("请输入批发价","error",!1),!1):""==i.type?(this.messageShow("请输入类型","error",!1),!1):(i.retailPrice=Number(i.retailPrice),Object(c.a)(i.firmId)?i.firmId=Number(i.firmId):a.options.map(function(e){e.label==i.firmId&&(i.firmId=Number(e.value))}),a.isLoading=!0,void(!0===a.isedit?Object(o.i)(i).then(function(e){console.log(e),"0000"===e.code?(t.$message({message:e.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):t.$message({message:e.msg,type:"error"})}).catch(function(e){t.$message({message:"服务器发生错误，请稍后再试！",type:"error"})}):Object(o.e)(i).then(function(e){"0000"===e.code?(t.$message({message:e.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):t.$message({message:e.msg,type:"error"})}).catch(function(e){t.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})))},edit:function(e){this.isedit=!0,this.fileList=[],this.modelTitle="编辑信息",this.addVisible=!0;var t="";this.options.map(function(a){a.value==e.firmId&&(t=a.label)}),this.addFrom={firmId:t,name:e.name,num:e.num,retailPrice:e.retailPrice,tradePrice:e.tradePrice,type:e.type,unit:e.unit,id:e.id,signPic:e.signPic}},messageShow:function(e,t,a){var i=this;i.$message({message:e,type:t,onClose:function(){a&&i.init()}})},handleRemove:function(e,t){this.addFrom.signPic=""},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},handlesuccess:function(e,t,a){this.addFrom.signPic=e,console.log(e,t,a)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container parkList"},[a("div",{staticClass:"title"},[e._v("烟草管理")]),e._v(" "),a("div",{ref:"searchBar",staticClass:"operations-bar"},[a("div",{staticClass:"right"},[a("el-form",{attrs:{inline:!0,model:e.searchBar}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择厂商"},model:{value:e.searchBar.firmId,callback:function(t){e.$set(e.searchBar,"firmId",t)},expression:"searchBar.firmId"}},e._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value},on:{blur:e.getblur}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称:"}},[a("el-input",{attrs:{autocomplete:"",placeholder:"输入商品名称进行搜索"},model:{value:e.searchBar.name,callback:function(t){e.$set(e.searchBar,"name",t)},expression:"searchBar.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品编码:"}},[a("el-input",{attrs:{value:e.searchBar.num,placeholder:" 请输入商品编码进行搜索"},nativeOn:{keyup:function(t){return e.handleInput(t)}},model:{value:e.searchBar.num,callback:function(t){e.$set(e.searchBar,"num",t)},expression:"searchBar.num"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"button-sel",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"button-rs",on:{click:e.reset}},[e._v("清空")])],1)],1)],1),e._v(" "),a("div",{staticClass:"left"},[a("el-button",{staticClass:"button-add",on:{click:e.addclick}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","plus-circle"],rotate:"90"}}),e._v("新增\n      ")],1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"pages-table",attrs:{"max-height":e.tableheight,"header-row-style":{height:0},"header-cell-style":{padding:0},"row-style":{height:0},"cell-style":{padding:0},data:e.entity,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"商品编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tradePrice",label:"批发价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"retailPrice",label:"零售价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),a("page",{attrs:{totalLength:e.total,number:e.pageSize},on:{listenToChildEvent:e.showMsgFromChild}}),e._v(" "),a("el-dialog",{staticClass:"addfrom",attrs:{title:e.modelTitle,visible:e.addVisible,width:"26%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{model:e.addFrom}},[a("div",{staticClass:"Formtitle"},[e._v("烟草信息")]),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("商品名称")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入商品名称"},model:{value:e.addFrom.name,callback:function(t){e.$set(e.addFrom,"name",t)},expression:"addFrom.name"}})],1),e._v(" "),e.isedit?e._e():a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("商品编码")])]),e._v(" "),a("el-input",{attrs:{type:"tel",autocomplete:"off",placeholder:"请输入商品编码"},model:{value:e.addFrom.num,callback:function(t){e.$set(e.addFrom,"num",t)},expression:"addFrom.num"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("烟草厂商")])]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择厂商"},model:{value:e.addFrom.firmId,callback:function(t){e.$set(e.addFrom,"firmId",t)},expression:"addFrom.firmId"}},e._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value},on:{blur:e.getblur}})}),1)],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("零售价")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入零售价"},model:{value:e.addFrom.retailPrice,callback:function(t){e.$set(e.addFrom,"retailPrice",t)},expression:"addFrom.retailPrice"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("批发价")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入批发价"},model:{value:e.addFrom.tradePrice,callback:function(t){e.$set(e.addFrom,"tradePrice",t)},expression:"addFrom.tradePrice"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("种类")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入类型"},model:{value:e.addFrom.type,callback:function(t){e.$set(e.addFrom,"type",t)},expression:"addFrom.type"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("单位")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.addFrom.unit,callback:function(t){e.$set(e.addFrom,"unit",t)},expression:"addFrom.unit"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("单位")])]),e._v(" "),a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.addFrom.unit,callback:function(t){e.$set(e.addFrom,"unit",t)},expression:"addFrom.unit"}})],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[e._v("*")]),e._v(" "),a("span",[e._v("上传图片")])]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"/file/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handlesuccess,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span")]),e._v(" "),e.addFrom.signPic&&e.isedit?a("img",{staticClass:"avatar",attrs:{src:e.addFrom.signPic}}):e._e()])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addCancle}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addsubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(d,m,!1,function(e){a("793i")},"data-v-1d363c12",null);t.default=u.exports}});