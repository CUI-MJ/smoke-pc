webpackJsonp([3],{"3kcg":function(t,e){},Ozrn:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("aA9S"),i=s.n(a),l=s("4YfN"),o=s.n(l),n=s("2VaB"),r=s("/bkh"),c=s("H8JJ"),d=s("R4Sj"),u=s("P9l9"),m=(s("dmtY"),{name:"Config",mixins:[n.a,c.a],components:{page:r.a},data:function(){return{activationVisible:!1,activationFrom:{userName:"",password:"",passwordChecked:!1},fileList:[],modelTitle:"新增公号",addVisible:!1,options:[],addFrom:{title:"",type:"",content:""},pageNum:1,pageSize:10,tableheight:500,entity:[],total:0,isLoading:!1,searchBar:{type:"",title:""},multipleSelection:[],isedit:!1,typeOptions:[{value:"政策法规",label:"政策法规"},{value:"组内活动",label:"组内活动"}]}},mounted:function(){this.init(),console.log(this.getUserType)},computed:o()({},Object(d.b)(["getUserType"])),methods:{init:function(){var t=this.getseachobj();this.getNoticeList(t)},handleSelectionChange:function(t){this.multipleSelection=t},getseachobj:function(){return i()({},this.searchBar)},reset:function(){this.searchBar={type:"",title:""},this.getNoticeList()},search:function(){var t=this.getseachobj();this.getNoticeList(t,!0)},getNoticeList:function(t,e){var s=this,a=this,l={pageNum:a.pageNum?a.pageNum:"",pageSize:a.pageSize?a.pageSize:""};!0===e&&(l.pageNum=1);var o=i()(l,t);console.log(o),Object(u.f)(o).then(function(t){if("0000"===t.code){var e=t.data.list;a.entity=e,a.total=t.data.total}else s.$message({message:t.msg,type:"error"})}).catch(function(t){})},getblurType:function(t){},handleClose:function(){},showMsgFromChild:function(t,e,s){if(this.pageNum==t&&this.pageSize==e)return!1;this.pageNum=t,this.pageSize=e;var a=this.getseachobj();this.getNoticeList(a)},addCancle:function(){this.addFrom={title:"",type:"",content:""},this.addVisible=!1},addclick:function(){this.fileList=[],this.modelTitle="新增信息",this.isedit=!1,this.addVisible=!0,this.addFrom={title:"",type:"",content:""}},addsubmit:function(t){var e=this,s=this,a=s.addFrom;return""==a.title?(this.messageShow("请输入公告标题","error",!1),!1):""==a.type?(this.messageShow("请选择公告类型","error",!1),!1):""==a.content?(this.messageShow("请输入公告内容","error",!1),!1):(s.isLoading=!0,void(!0===s.isedit?Object(u.m)(a).then(function(t){"0000"===t.code?(e.$message({message:t.msg,type:"success"}),s.addCancle(),s.init(),s.isLoading=!1):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:"服务器发生错误，请稍后再试！",type:"error"})}):Object(u.h)(a).then(function(t){"0000"===t.code?(e.$message({message:t.msg,type:"success"}),s.addCancle(),s.init(),s.isLoading=!1):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})))},push:function(t,e){var s=this,a=this,i={id:t.id,status:e},l="";0==e&&(l="确认撤回此文章?"),1==e&&(l="确认发布此文章?"),2==e&&(l="此操作将永久删除该文章, 是否继续?"),this.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.m)(i).then(function(t){"0000"===t.code?(s.$message({message:t.msg,type:"success"}),a.init(),a.isLoading=!1):s.$message({message:t.msg,type:"error"})}).catch(function(t){s.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},edit:function(t){this.isedit=!0,this.modelTitle="编辑信息",this.addVisible=!0,this.addFrom={title:t.title,type:t.type,content:t.content,id:t.id}},messageShow:function(t,e,s){var a=this;a.$message({message:t,type:e,onClose:function(){s&&a.init()}})}}}),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-container parkList"},[s("div",{staticClass:"title"},[t._v("公告管理")]),t._v(" "),s("div",{ref:"searchBar",staticClass:"operations-bar"},[s("div",{staticClass:"right"},[s("el-form",{attrs:{inline:!0,model:t.searchBar}},[s("el-form-item",{attrs:{label:"公告类型:"}},[s("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:t.searchBar.type,callback:function(e){t.$set(t.searchBar,"type",e)},expression:"searchBar.type"}},t._l(t.typeOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value},on:{blur:t.getblurType}})}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"公告名称:"}},[s("el-input",{attrs:{autocomplete:"",placeholder:"输入公告名称进行搜索"},model:{value:t.searchBar.title,callback:function(e){t.$set(t.searchBar,"title",e)},expression:"searchBar.title"}})],1),t._v(" "),s("el-form-item",[s("el-button",{staticClass:"button-sel",attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),s("el-button",{staticClass:"button-rs",on:{click:t.reset}},[t._v("清空")])],1)],1)],1),t._v(" "),s("div",{staticClass:"left"},[2!=t.getUserType?s("el-button",{staticClass:"button-add",on:{click:t.addclick}},[s("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","plus-circle"],rotate:"90"}}),t._v("新增\n      ")],1):t._e()],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"pages-table",attrs:{"max-height":t.tableheight,"header-row-style":{height:0},"header-cell-style":{padding:0},"row-style":{height:0},"cell-style":{padding:0},data:t.entity,border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"公告名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"type",label:"公告类型"}}),t._v(" "),s("el-table-column",{attrs:{label:"公告状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?s("span",[t._v("已发布")]):t._e(),t._v(" "),0==e.row.status?s("span",[t._v("未发布")]):t._e()]}}])}),t._v(" "),2!=t.getUserType?s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?s("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(s){return t.push(e.row,0)}}},[t._v("撤回")]):t._e(),t._v(" "),0==e.row.status?s("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(s){return t.push(e.row,1)}}},[t._v("发布")]):t._e(),t._v(" "),s("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(s){return t.edit(e.row)}}},[t._v("修改")]),t._v(" "),s("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(s){return t.push(e.row,2)}}},[t._v("删除")])]}}],null,!1,3363750359)}):t._e()],1),t._v(" "),s("page",{attrs:{totalLength:t.total,number:t.pageSize},on:{listenToChildEvent:t.showMsgFromChild}}),t._v(" "),s("el-dialog",{staticClass:"addfrom",attrs:{title:t.modelTitle,visible:t.addVisible,width:"40%"},on:{"update:visible":function(e){t.addVisible=e}}},[s("el-form",{attrs:{model:t.addFrom}},[s("div",{staticClass:"Formtitle"},[t._v("公号信息")]),t._v(" "),s("el-form-item",[s("label",{staticClass:"itemlable"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" "),s("span",[t._v("公告名称")])]),t._v(" "),s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入公告名称"},model:{value:t.addFrom.title,callback:function(e){t.$set(t.addFrom,"title",e)},expression:"addFrom.title"}})],1),t._v(" "),s("el-form-item",[s("label",{staticClass:"itemlable"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" "),s("span",[t._v("公告类型")])]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:t.addFrom.type,callback:function(e){t.$set(t.addFrom,"type",e)},expression:"addFrom.type"}},t._l(t.typeOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("el-form-item",[s("label",{staticClass:"itemlable"},[s("span",{staticClass:"red"},[t._v("*")]),t._v(" "),s("span",[t._v("公告内容")])]),t._v(" "),s("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20},placeholder:"请输入内容"},model:{value:t.addFrom.content,callback:function(e){t.$set(t.addFrom,"content",e)},expression:"addFrom.content"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.addCancle}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addsubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=s("C7Lr")(m,p,!1,function(t){s("3kcg")},"data-v-a9148b48",null);e.default=h.exports}});