webpackJsonp([5],{AVS9:function(t,e){},Ozrn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),l=a("2VaB"),o=a("/bkh"),n=a("H8JJ"),r=(a("R4Sj"),a("P9l9")),c=(a("dmtY"),{name:"Config",mixins:[l.a,n.a],components:{page:o.a},data:function(){return{activationVisible:!1,activationFrom:{userName:"",password:"",passwordChecked:!1},fileList:[],modelTitle:"新增公号",addVisible:!1,options:[],addFrom:{title:"",type:"",content:""},pageNum:1,pageSize:10,tableheight:500,entity:[],total:0,isLoading:!1,searchBar:{type:"",title:""},multipleSelection:[],isedit:!1,typeOptions:[{value:"政策法规",label:"政策法规"},{value:"组内活动",label:"组内活动"}]}},mounted:function(){this.init()},computed:{},methods:{init:function(){var t=this.getseachobj();this.getNoticeList(t)},handleSelectionChange:function(t){this.multipleSelection=t},getseachobj:function(){return i()({},this.searchBar)},reset:function(){this.searchBar={type:"",title:""},this.getNoticeList()},search:function(){var t=this.getseachobj();this.getNoticeList(t,!0)},getNoticeList:function(t,e){var a=this,s=this,l={pageNum:s.pageNum?s.pageNum:"",pageSize:s.pageSize?s.pageSize:""};!0===e&&(l.pageNum=1);var o=i()(l,t);console.log(o),Object(r.f)(o).then(function(t){if("0000"===t.code){var e=t.data.list;s.entity=e,s.total=t.data.total}else a.$message({message:t.msg,type:"error"})}).catch(function(t){})},getblurType:function(t){},handleClose:function(){},showMsgFromChild:function(t,e,a){if(this.pageNum==t&&this.pageSize==e)return!1;this.pageNum=t,this.pageSize=e;var s=this.getseachobj();this.getNoticeList(s)},addCancle:function(){this.addFrom={title:"",type:"",content:""},this.addVisible=!1},addclick:function(){this.fileList=[],this.modelTitle="新增信息",this.isedit=!1,this.addVisible=!0,this.addFrom={title:"",type:"",content:""}},addsubmit:function(t){var e=this,a=this,s=a.addFrom;return""==s.title?(this.messageShow("请输入公告标题","error",!1),!1):""==s.type?(this.messageShow("请选择公告类型","error",!1),!1):""==s.content?(this.messageShow("请输入公告内容","error",!1),!1):(a.isLoading=!0,void(!0===a.isedit?Object(r.m)(s).then(function(t){"0000"===t.code?(e.$message({message:t.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:"服务器发生错误，请稍后再试！",type:"error"})}):Object(r.h)(s).then(function(t){"0000"===t.code?(e.$message({message:t.msg,type:"success"}),a.addCancle(),a.init(),a.isLoading=!1):e.$message({message:t.msg,type:"error"})}).catch(function(t){e.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})))},push:function(t,e){var a=this,s=this,i={id:t.id,status:e};this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.m)(i).then(function(t){"0000"===t.code?(a.$message({message:t.msg,type:"success"}),s.init(),s.isLoading=!1):a.$message({message:t.msg,type:"error"})}).catch(function(t){a.$message({message:"服务器发生错误，请稍后再试！",type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},edit:function(t){this.isedit=!0,this.modelTitle="编辑信息",this.addVisible=!0,this.addFrom={title:t.title,type:t.type,content:t.content,id:t.id}},messageShow:function(t,e,a){var s=this;s.$message({message:t,type:e,onClose:function(){a&&s.init()}})}}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container parkList"},[a("div",{staticClass:"title"},[t._v("公告管理")]),t._v(" "),a("div",{ref:"searchBar",staticClass:"operations-bar"},[a("div",{staticClass:"right"},[a("el-form",{attrs:{inline:!0,model:t.searchBar}},[a("el-form-item",{attrs:{label:"公告类型:"}},[a("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:t.searchBar.type,callback:function(e){t.$set(t.searchBar,"type",e)},expression:"searchBar.type"}},t._l(t.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value},on:{blur:t.getblurType}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"公告名称:"}},[a("el-input",{attrs:{autocomplete:"",placeholder:"输入公告名称进行搜索"},model:{value:t.searchBar.title,callback:function(e){t.$set(t.searchBar,"title",e)},expression:"searchBar.title"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"button-sel",attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"button-rs",on:{click:t.reset}},[t._v("清空")])],1)],1)],1),t._v(" "),a("div",{staticClass:"left"},[a("el-button",{staticClass:"button-add",on:{click:t.addclick}},[a("font-awesome-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:["fas","plus-circle"],rotate:"90"}}),t._v("新增\n      ")],1)],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"pages-table",attrs:{"max-height":t.tableheight,"header-row-style":{height:0},"header-cell-style":{padding:0},"row-style":{height:0},"cell-style":{padding:0},data:t.entity,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"公告名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"公告类型"}}),t._v(" "),a("el-table-column",{attrs:{label:"公告状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",[t._v("已发布")]):t._e(),t._v(" "),0==e.row.status?a("span",[t._v("未发布")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return t.push(e.row,0)}}},[t._v("撤回")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return t.push(e.row,1)}}},[t._v("发布")]):t._e(),t._v(" "),a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticClass:"but-f",attrs:{type:"text"},on:{click:function(a){return t.push(e.row,2)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("page",{attrs:{totalLength:t.total,number:t.pageSize},on:{listenToChildEvent:t.showMsgFromChild}}),t._v(" "),a("el-dialog",{staticClass:"addfrom",attrs:{title:t.modelTitle,visible:t.addVisible,width:"40%"},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{attrs:{model:t.addFrom}},[a("div",{staticClass:"Formtitle"},[t._v("公号信息")]),t._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[t._v("*")]),t._v(" "),a("span",[t._v("公告名称")])]),t._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入公告名称"},model:{value:t.addFrom.title,callback:function(e){t.$set(t.addFrom,"title",e)},expression:"addFrom.title"}})],1),t._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[t._v("*")]),t._v(" "),a("span",[t._v("公告类型")])]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择公告类型"},model:{value:t.addFrom.type,callback:function(e){t.$set(t.addFrom,"type",e)},expression:"addFrom.type"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("label",{staticClass:"itemlable"},[a("span",{staticClass:"red"},[t._v("*")]),t._v(" "),a("span",[t._v("公告内容")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:20},placeholder:"请输入内容"},model:{value:t.addFrom.content,callback:function(e){t.$set(t.addFrom,"content",e)},expression:"addFrom.content"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.addCancle}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addsubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(c,d,!1,function(t){a("AVS9")},"data-v-5e562ea8",null);e.default=u.exports}});